<div class="container">
  <h1>Application Logs</h1>

  <div class="filters">
    <div class="filter-group">
      <label for="startDate">Start Date:</label>
      <input type="date" id="startDate" [(ngModel)]="startDate" (change)="onFilterChange()" />
    </div>

    <div class="filter-group">
      <label for="endDate">End Date:</label>
      <input type="date" id="endDate" [(ngModel)]="endDate" (change)="onFilterChange()" />
    </div>

    <div class="filter-group">
      <label for="severity">Severity:</label>
      <select id="severity" [(ngModel)]="severity" (change)="onFilterChange()">
        <option value="">All</option>
        <option value="info">Info</option>
        <option value="warn">Warn</option>
        <option value="error">Error</option>
      </select>
    </div>
  </div>

  <button (click)="deleteAllLogs()" class="btn btn-danger">Delete All Logs</button>

  @if(errorMessage()){
  <div class="alert alert-error">
    {{ errorMessage() }}
  </div>
  } @else if(logs().length === 0){
  <div class="no-data">No logs found.</div>

  } @else{

  <table class="table">
    <thead>
      <tr>
        <th>Timestamp</th>
        <th>Severity</th>
        <th>Message</th>
        <th>Stack</th>
        <th>Route</th>
        <th>Method</th>
        <th>Status Code</th>
      </tr>
    </thead>
    <tbody>
      @for(log of logs(); track log.id; let i = $index) {
      <tr>
        <td>{{ log.timestamp | date : 'medium' }}</td>
        <td>{{ log.severity }}</td>
        <td>{{ log.message }}</td>
        <td>{{ log.stack || 'N/A' }}</td>
        <td>{{ log.route || 'N/A' }}</td>
        <td>{{ log.method || 'N/A' }}</td>
        <td>{{ log.statusCode || 'N/A' }}</td>
      </tr>
      }
    </tbody>
  </table>
  }
</div>
